!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t||self).raycast={})}(this,function(t){function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var e=o("colinear"),r=o("parallel"),a=o("none");function o(t){return{type:t}}var i=/*#__PURE__*/function(){function t(t){this.uniquePoints=[],this.uniqueAngles=[],this.setSegments(t)}var i=t.prototype;return i.setSegments=function(t){var i=t.reduce(function(t,n){for(var e=function(){var e=a[r];t.some(function(t){return t.x===e.x&&t.y===e.y})||t.push(n.a,n.b)},r=0,a=Object.values(n);r<a.length;r++)e();return t},[]),u=t.reduce(function(i,u){for(var s,c=function(){var t=s.value,n=function(t,n,i,u,s,c,f,y){var l=(y-c)*(i-t)-(f-s)*(u-n),p=(f-s)*(n-c)-(y-c)*(t-s),h=(i-t)*(n-c)-(u-n)*(t-s);if(0==l)return 0==p&&0==h?e:r;var v,x,g=p/l,b=h/l;return g>=0&&g<=1&&b>=0&&b<=1?(v={x:t+g*(i-t),y:n+g*(u-n)},(x=o("intersecting")).point=v,x):a}(u.a.x,u.a.y,u.b.x,u.b.y,t.a.x,t.a.y,t.b.x,t.b.y);"intersecting"!==n.type||i.some(function(t){return t.x===n.point.x&&t.y!==n.point.y})||i.push({x:n.point.x,y:n.point.y})},f=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t))){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);!(s=f()).done;)c();return i},[]);this.uniquePoints=[].concat(u,i),this.segments=t},i.createRay=function(t,n,e){return{a:{x:t,y:n},b:{x:t+Math.cos(e),y:n+Math.sin(e)}}},i.getIntersection=function(t,n){var e=t.a.x,r=t.a.y,a=t.b.x-t.a.x,o=t.b.y-t.a.y,i=n.a.y,u=n.b.x-n.a.x,s=n.b.y-n.a.y;if(a*s==o*u)return null;var c=(a*(i-r)+o*(e-n.a.x))/(u*o-s*a),f=(i+s*c-r)/o;return f<0||c<0||c>1?null:{x:e+a*f,y:r+o*f,param:f}},i.emit=function(t,n){for(var e=[],r=0;r<this.uniquePoints.length;r++){var a=this.uniquePoints[r],o=Math.atan2(a.y-n,a.x-t);e.push(o-1e-4,o,o+1e-4)}for(var i=[],u=0;u<e.length;u++){for(var s=e[u],c=this.createRay(t,n,s),f=null,y=0;y<this.segments.length;y++){var l=this.getIntersection(c,this.segments[y]);l&&(!f||l.param<f.param)&&(f=l)}f&&(f.angle=s,i.push(f))}return i.sort(function(t,n){return t.angle-n.angle})},t}();t.createRaycaster=function(t){return new i(t)},t.createSegment=function(t,n,e,r){return{a:{x:t,y:n},b:{x:e,y:r}}}});
//# sourceMappingURL=raycast.umd.js.map
